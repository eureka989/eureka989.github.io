+++
title = 'Windows安装Mysql'
date = 2024-11-06T15:11:28+08:00
draft = true
image = "伦敦地铁车站.jpg"
tags = ["笔记"]
categories = ["教程"]
+++

使用图形化界面安装MySQL的时候，遇到初始化数据库失败的情况，尝试了网上说的很多种方法，都没有用，于是决定不使用图形化界面安装

* 先下载MySQL
  * 下载链接 `https://downloads.mysql.com/archives/community/`

![image-20240701231027404](https://cdn.jsdelivr.net/gh/eureka989/Pictures@main/202411061512761.png)

* 下载后来之后解压到自己想要安装的位置，我这里是虚拟机，就安装到 C 盘根目录

![image-20240701231359042](https://cdn.jsdelivr.net/gh/eureka989/Pictures@main/202411061512911.png)

* 接下来配置环境变量，如图：

![image-20240701231557891](https://cdn.jsdelivr.net/gh/eureka989/Pictures@main/202411061512362.png)

![image-20240701231746765](https://cdn.jsdelivr.net/gh/eureka989/Pictures@main/202411061527661.png)

![image-20240701232013813](https://cdn.jsdelivr.net/gh/eureka989/Pictures@main/202411061512048.png)

* 在MySQL的目录下创建一个名为`data` 的文件夹

![image-20240701232721233](https://cdn.jsdelivr.net/gh/eureka989/Pictures@main/202411061512948.png)

* 再创建一个 `my.ini` 文件，并将下面的内容复制到 `my.ini` 文件中

~~~mysql
# For advice on how to change settings please see
# http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html
# *** DO NOT EDIT THIS FILE. It's a template which will be copied to the
# *** default location during install, and will be replaced if you
# *** upgrade to a newer version of MySQL.
[client]
port = 3306
default-character-set=utf8
[mysqld]

# Remove leading # and set to the amount of RAM for the most important data
# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.
# innodb_buffer_pool_size = 128M

# Remove leading # to turn on a very important data integrity option: logging
# changes to the binary log between backups.
# log_bin

# These are commonly set, remove the # and set as required.
character_set_server=utf8
init_connect='SET NAMES utf8'

# mysql 的安装目录
basedir = C:\mysql-5.7.44-winx64
# 数据库数据的存放目录
datadir = C:\mysql-5.7.44-winx64\data

port = 3306
default-storage-engine=INNODB
# server_id = .....


# Remove leading # to set options mainly useful for reporting servers.
# The server defaults are faster for transactions and fast SELECTs.
# Adjust sizes as needed, experiment to find the optimal values.
# join_buffer_size = 128M
# sort_buffer_size = 2M
# read_rnd_buffer_size = 2M 

~~~

![image-20240701234138227](https://cdn.jsdelivr.net/gh/eureka989/Pictures@main/202411061513634.png)

* 以管理员身份运行 cmd

![image-20240701233321916](https://cdn.jsdelivr.net/gh/eureka989/Pictures@main/202411061513753.png)

* 执行下面的命令

~~~mysql
# 安装 mysql 数据库
mysqld -install mysql57
# 初始化数据库
mysqld --defaults-file="C:\mysql-5.7.44-winx64\my.ini" --initialize --console
# 启动数据库服务
net start mysql57
~~~

![image-20240701234756682](https://cdn.jsdelivr.net/gh/eureka989/Pictures@main/202411061513201.png)

* 登录 MySQL，修改密码

~~~mysql
# 登录MySQL
mysql -uroot -p
# 修改密码
ALTER USER 'root'@'localhost' IDENTIFIED BY 'root123';
~~~

![image-20240701235149062](https://cdn.jsdelivr.net/gh/eureka989/Pictures@main/202411061513973.png)

* 退出，使用修改后的密码重新登录，验证密码是否修改成功

![image-20240701235315542](https://cdn.jsdelivr.net/gh/eureka989/Pictures@main/202411061513104.png)

成功

